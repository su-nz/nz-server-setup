# Ubuntu Server Automation Setup ğŸš€

NZ çš„ Ubuntu Server åˆå§‹åŒ–èˆ‡è‡ªå‹•ç¶­è­·è…³æœ¬é›†ã€‚

## ğŸ“‹ åŠŸèƒ½èªªæ˜

| è…³æœ¬ | åŠŸèƒ½ |
|------|------|
| `setup.sh` | **äº’å‹•å¼å®‰è£ç¨‹å¼**ï¼šå¯é¸æ“‡å…¨è‡ªå‹•æˆ–æ‰‹å‹•æŒ‘é¸å®‰è£é …ç›®ï¼ˆç³»çµ±æ›´æ–°ã€åŸºç¤å·¥å…·ã€Dockerã€é˜²ç«ç‰†ã€Tailscaleã€OpenVPNã€æ™‚å€ã€ç¶­è­·æ’ç¨‹ï¼‰ |
| `update.sh` | è‡ªå‹•åŒ–ç³»çµ±æ›´æ–°ã€å¥—ä»¶æ¸…ç†èˆ‡ Docker è³‡æºç¶­è­·ï¼ˆæ¯æ—¥å‡Œæ™¨ 04:00 åŸ·è¡Œï¼‰ |

## ğŸš€ å¿«é€Ÿé–‹å§‹

åœ¨æ–° Ubuntu ä¸»æ©Ÿä¸ŠåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
# ä¸‹è¼‰å®‰è£è…³æœ¬
wget https://raw.githubusercontent.com/su-nz/nz-server-setup/main/setup.sh
chmod +x setup.sh

# åŸ·è¡Œäº’å‹•å¼å®‰è£ç¨‹å¼
./setup.sh
```

### å®‰è£æ¨¡å¼

å®‰è£ç¨‹å¼æä¾›å…©ç¨®æ¨¡å¼ï¼š
- **æ¨¡å¼ 1 - è‡ªå‹•å®‰è£å…¨éƒ¨**ï¼šä¸€éµå®‰è£æ‰€æœ‰é …ç›®
- **æ¨¡å¼ 2 - æ‰‹å‹•é¸æ“‡**ï¼šé€é …é¸æ“‡è¦å®‰è£çš„åŠŸèƒ½

æ¯æ¬¡å®‰è£å‰éƒ½æœƒé¡¯ç¤ºæ¸…å–®ä¾›ç¢ºèªã€‚

## ğŸ› ï¸ å¸¸ç”¨æŒ‡ä»¤

| åŠŸèƒ½ | æŒ‡ä»¤ |
|------|------|
| ç™»å…¥ Tailscale | `sudo tailscale up` |
| è¨­å®š OpenVPN | `sudo ./openvpn-install.sh` |
| æŸ¥çœ‹ OpenVPN ç‹€æ…‹ | `sudo systemctl status openvpn-server@server` |
| æŸ¥çœ‹æ›´æ–°æ—¥èªŒ | `tail -f /var/log/server_maintenance.log` |
| æ‰‹å‹•åŸ·è¡Œç¶­è­· | `sudo /usr/local/bin/update.sh` |
| é˜²ç«ç‰†é–‹æ”¾é€£æ¥åŸ  | `sudo ufw allow 8080/tcp` |
| æŸ¥çœ‹ Fail2ban ç‹€æ…‹ | `sudo fail2ban-client status` |
| é‡å•Ÿ Docker | `sudo systemctl restart docker` |
| æ¸…ç† Docker è³‡æº | `docker system prune -af --volumes` |

## âš™ï¸ å®‰è£å…§å®¹

æ‰€æœ‰é …ç›®çš†å¯åœ¨äº’å‹•å¼ä»‹é¢ä¸­è‡ªç”±é¸æ“‡å®‰è£ï¼š

### ç³»çµ±å·¥å…·
- `htop, net-tools, tmux` - ç³»çµ±ç›£æ§èˆ‡çµ‚ç«¯å·¥å…·
- `curl, wget, git, vim` - åŸºç¤é–‹ç™¼å·¥å…·
- `build-essential` - ç·¨è­¯å·¥å…·é›†
- `tree, unzip, traceroute` - æª”æ¡ˆæ“ä½œèˆ‡ç¶²è·¯è¨ºæ–·å·¥å…·

### å®‰å…¨èˆ‡å®¹å™¨
- **Docker** - å®¹å™¨å¹³è‡ºï¼ˆè‡ªå‹•åŠ å…¥ docker ç¾¤çµ„ï¼Œé¿å… sudoï¼‰
- **UFW** - é˜²ç«ç‰†ï¼ˆé è¨­é–‹æ”¾ SSH 22 ç«¯å£ï¼‰
- **Fail2ban** - é˜²æš´åŠ›ç ´è§£

### VPN è§£æ±ºæ–¹æ¡ˆ
- **Tailscale** - Mesh VPN ç¶²è·¯ï¼ˆé›¶é…ç½® P2P VPNï¼‰
- **OpenVPN** - å‚³çµ± VPN Serverï¼ˆéœ€æ‰‹å‹•é…ç½®ï¼Œé è¨­ UDP 1194ï¼‰

### è‡ªå‹•ç¶­è­·
- **update.sh** - ç³»çµ±æ›´æ–°èˆ‡ Docker æ¸…ç†è…³æœ¬
- **Crontab** - æ¯æ—¥å‡Œæ™¨ 4:00 è‡ªå‹•åŸ·è¡Œç¶­è­·

## âš™ï¸ è¨­å®šèªªæ˜

- **äº’å‹•æ¨¡å¼**: å®‰è£å‰å¯é¸æ“‡å…¨è‡ªå‹•æˆ–æ‰‹å‹•æŒ‘é¸é …ç›®ï¼Œä¸¦æœƒé¡¯ç¤ºæ¸…å–®ä¾›æœ€çµ‚ç¢ºèª
- **æ™‚å€**: é è¨­è¨­å®šç‚º `Asia/Taipei`
- **é˜²ç«ç‰†**: è‡ªå‹•å•Ÿç”¨ UFWï¼Œé è¨­é–‹æ”¾ SSH é€£ç·š
- **é˜²æš´åŠ›ç ´è§£**: Fail2ban å·²å•Ÿç”¨ï¼Œè‡ªå‹•å°é–ç•°å¸¸ç™»å…¥å˜—è©¦
- **æ›´æ–°æ¨¡å¼**: æ‰€æœ‰æ›´æ–°å‡æ¡ç”¨ `noninteractive` æ¨¡å¼ï¼Œé¿å…å®‰è£éç¨‹ä¸­çš„è©¢å•è¦–çª—
- **å®šæ™‚åŸ·è¡Œ**: ç¶­è­·ä»»å‹™ç”± crontab æ¯æ—¥å‡Œæ™¨ 04:00 è‡ªå‹•åŸ·è¡Œï¼ˆåŒ…å«ç³»çµ±æ›´æ–°èˆ‡ Docker æ¸…ç†ï¼‰
- **å®‰å…¨æ€§**: æ‰€æœ‰å®‰è£è…³æœ¬çš†å¾å®˜æ–¹ä¾†æºä¸‹è¼‰ï¼ˆDockerã€Tailscaleã€OpenVPN å‡ä½¿ç”¨å®Œæ•´ URLï¼‰

## âš¡ é¦–æ¬¡ä½¿ç”¨æ³¨æ„

1. **Docker**: å®‰è£å¾Œéœ€é‡æ–°ç™»å…¥æˆ–åŸ·è¡Œ `newgrp docker` æ‰èƒ½ä½¿ç”¨
2. **Tailscale**: åŸ·è¡Œ `sudo tailscale up` ç™»å…¥ç¶²è·¯
3. **OpenVPN**: 
   - åŸ·è¡Œ `sudo ./openvpn-install.sh` å®Œæˆäº’å‹•å¼è¨­å®š
   - è¨˜å¾—é–‹æ”¾ UDP 1194 ç«¯å£ï¼š`sudo ufw allow 1194/udp`
   - è¨­å®šå®Œæˆå¾Œæœƒç”¢ç”Ÿ `.ovpn` å®¢æˆ¶ç«¯è¨­å®šæª”
4. **UFW**: è‹¥éœ€é–‹æ”¾å…¶ä»–é€£æ¥åŸ ï¼Œä½¿ç”¨ `sudo ufw allow <port>/<protocol>`
5. **è‡ªå‹•ç¶­è­·**: æ—¥èªŒæª”ä½æ–¼ `/var/log/server_maintenance.log`ï¼Œå¯éš¨æ™‚æŸ¥çœ‹ç¶­è­·è¨˜éŒ„

## ğŸ“ å‚™è¨»

å¦‚éœ€èª¿æ•´æ™‚å€ã€é˜²ç«ç‰†è¦å‰‡æˆ–å…¶ä»–è¨­å®šï¼Œè«‹ç·¨è¼¯ç›¸æ‡‰çš„è…³æœ¬æª”æ¡ˆã€‚